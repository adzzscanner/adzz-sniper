<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRYPTO SNIPER v7.3.8 | LIVE BINANCE</title>
<style>
    body { background-color: #000; font-family: 'Courier New', monospace; color: #00ff00; margin: 0; padding: 0; }
    .header { background: linear-gradient(90deg, #00ff00, #009900); color: #000; text-align: center; padding: 10px; font-weight: bold; font-size: 1.1rem; letter-spacing: 1px; }
    .container { max-width: 600px; margin: 0 auto; padding: 10px; text-align: center; }
    .control-panel { background: #002200; border: 2px solid #00ff00; border-radius: 8px; padding: 20px; box-shadow: 0 0 20px #00ff00; }
    .scan-button { background: #00ff00; color: #000; border: none; border-radius: 6px; font-weight: bold; padding: 12px 35px; font-size: 1.1rem; cursor: pointer; }
    .scan-button:hover { background: #00cc00; }
    .scan-button:disabled { background: #005500; cursor: not-allowed; }
    .progress-bar { background: #001400; border-radius: 6px; overflow: hidden; margin: 15px 0; }
    .progress-fill { background: linear-gradient(90deg, #00ff00, #33ff33); height: 18px; width: 0%; transition: width 0.3s; }
    #scanProgress { font-size: 0.9rem; color: #90ff90; }
    .status { background: #001400; border: 1px solid #00ff00; border-radius: 5px; padding: 8px; font-weight: bold; margin-top: 8px; }
    .result-panel { border: 2px solid #00ff00; border-radius: 10px; background: #002200; box-shadow: 0 0 10px #00ff00; padding: 10px; margin-top: 20px; text-align: left; display: none; }
    .signal-card { background: #003300; border: 1px solid #00ff00; border-radius: 6px; padding: 10px; margin-bottom: 10px; box-shadow: inset 0 0 8px #00ff00; }
    .signal-card h4 { color: #00ff00; margin-bottom: 5px; }
    .signal-card p { font-size: 0.9rem; margin: 2px 0; }
    .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; }
    .stat-box { border: 2px solid #00ff00; border-radius: 5px; padding: 10px; background: #002200; box-shadow: 0 0 10px #00ff00; }
    .stat-box h4 { margin-bottom: 8px; font-size: 0.9rem; color: #00ff00; }
    .live-price { color: #ffff00; font-weight: bold; }
    #btcStatus.unstable { color: #ff5555 !important; }
</style>
</head>
<body>
<div class="header">ðŸª™ COIN SCANNER | LIVE BINANCE ðŸš€</div>

<div class="container">
    <div class="control-panel">
        <h3>ðŸŽ¯ SINGLE SCAN BUTTON</h3>
        <button id="scanButton" class="scan-button" onclick="runFullScan()">SCAN AGAIN âž¤</button>
        <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
        <div id="scanProgress">READY</div>
        <div class="status" id="scannerStatus">READY</div>
    </div>

    <div id="resultPanel" class="result-panel">
        <h3 id="resultTitle">NO SCAN YET</h3>
        <div id="resultContent"></div>
    </div>

    <div class="stat-grid">
        <div class="stat-box"><h4>COINS SCANNED</h4><div id="coinsScanned">0</div></div>
        <div class="stat-box"><h4>PASS RATE</h4><div id="passRate">0%</div></div>
        <div class="stat-box"><h4>SIGNALS</h4><div id="totalSignals">0</div></div>
        <div class="stat-box"><h4>BTC STATUS</h4><div id="btcStatus" class="stable">ðŸŸ© STABLE</div></div>
    </div>
</div>

<script>
const FLASH_COINS = ["APTUSDT","SKYUSDT","TAOUSDT","JUPUSDT","ACTUSDT","CYBERUSDT"];
const NORMAL_COINS = ["PIXELUSDT","NILUSDT","ONDOUSDT","WUSDT","ORDIUSDT","SAGAUSDT","WOOUSDT","TRUUSDT","NEARUSDT","IMXUSDT","OPUSDT","ARBUSD","GMXUSDT","DYDXUSDT","LDOUSDT","SNXUSDT","CRVUSDT","UNIUSDT","AAVEUSDT","MKRUSDT","COMPUSDT","YFIUSDT","BALUSDT","SUSHIUSDT","1INCHUSDT","BIFIUSDT","ATUSDT","ZRXUSDT","XVGUSDT","AVNTUSDT","ONEUSDT","SOLVUSDT"];
const ALL_COINS = [...FLASH_COINS, ...NORMAL_COINS.filter(c => !FLASH_COINS.includes(c))];

// ===== BINANCE API FUNCTIONS =====
async function fetchKlineData(coin) {
    try {
        const res = await fetch(`https://api.binance.com/api/v3/klines?symbol=${coin}&interval=1h&limit=2`);
        const data = await res.json();
        const high = parseFloat(data[0][2]);
        const close = parseFloat(data[0][4]);
        const volume = parseFloat(data[0][5]);
        const dip = ((high - close)/high)*100;
        return { price: close, high, volume, dip };
    } catch (e) {
        console.error("Error fetching kline", coin, e);
        return null;
    }
}

async function fetchBTC1hChange() {
    try {
        const res = await fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT');
        const data = await res.json();
        return parseFloat(data.priceChangePercent);
    } catch (e) {
        console.error("Error fetching BTC change", e);
        return 0;
    }
}

// ===== SCAN LOGIC =====
function calculateVolScore(volume,dip){ return Math.round(volume*0.0001*(dip/15)*100); }

async function scanCoin(coin){
    const data = await fetchKlineData(coin);
    if(!data) return null;
    const dip = data.dip;
    const volScore = calculateVolScore(data.volume,dip);
    let signal = null,tp = null;

    if(FLASH_COINS.includes(coin) && dip>=12 && dip<20 && volScore>=75){ signal='ðŸš€ FLASH'; tp=volScore>=90?'15%':'10%'; }
    else if(NORMAL_COINS.includes(coin) && dip>=8 && dip<12 && volScore>=75){ signal='âœ… NORMAL'; tp='10%'; }

    if(signal){
        const entryLow = data.price*(1-(dip/100)*0.6);
        return { coin, signal, price:data.price, dip:dip.toFixed(2), volScore, entryLow:entryLow.toFixed(4), entryHigh:data.price.toFixed(4), tp };
    }
    return null;
}

// ===== UI =====
function updateProgress(current,total){
    const percent = Math.min(100,Math.round((current/total)*100));
    document.getElementById('progressFill').style.width = percent+'%';
    document.getElementById('scanProgress').textContent=`SCANNING: ${current}/${total}`;
}

function showResults(signals){
    const panel = document.getElementById('resultPanel');
    const title = document.getElementById('resultTitle');
    const content = document.getElementById('resultContent');
    if(signals.length===0){ title.textContent='NO SIGNALS FOUND'; content.innerHTML='<p>No coins met the dip + volume criteria.</p>'; }
    else{
        title.textContent=`${signals.length} SIGNAL${signals.length!==1?'S':''} FOUND`;
        content.innerHTML = signals.map(s=>`
            <div class="signal-card">
                <h4>${s.signal} | ${s.coin}</h4>
                <p>Price: <span class="live-price">$${parseFloat(s.price).toFixed(4)}</span></p>
                <p>Dip: ${s.dip}% | VolScore: ${s.volScore}</p>
                <p>Entry: $${s.entryLow} â€“ $${s.entryHigh}</p>
                <p>ðŸŽ¯ TP: ${s.tp}</p>
            </div>
        `).join('');
    }
    panel.style.display='block';
}

function updateStats(signals){
    document.getElementById('totalSignals').textContent=signals.length;
    document.getElementById('passRate').textContent=Math.round((signals.length/ALL_COINS.length)*100)+'%';
}

// ===== MAIN SCAN FUNCTION =====
async function runFullScan(){
    const button = document.getElementById('scanButton');
    const statusEl = document.getElementById('scannerStatus');
    const btcStatusEl = document.getElementById('btcStatus');

    button.disabled=true;
    button.textContent="SCANNING...";
    statusEl.textContent="CHECKING BTC...";

    const btcChange = await fetchBTC1hChange();
    const btcStable = Math.abs(btcChange)<1.0;
    btcStatusEl.textContent = btcStable?'ðŸŸ© STABLE':'ðŸŸ¥ VOLATILE';
    btcStatusEl.className = btcStable?'stable':'unstable';

    if(!btcStable){
        statusEl.textContent="SKIPPED: BTC TOO VOLATILE";
        document.getElementById('resultPanel').style.display='none';
        updateStats([]);
        button.disabled=false;
        button.textContent="SCAN AGAIN âž¤";
        updateProgress(0,ALL_COINS.length);
        return;
    }

    statusEl.textContent="SCANNING COINS...";
    updateProgress(0,ALL_COINS.length);
    let signals = [];

    for(let i=0;i<ALL_COINS.length;i++){
        const coin=ALL_COINS[i];
        const result=await scanCoin(coin);
        if(result) signals.push(result);
        updateProgress(i+1,ALL_COINS.length);
    }

    showResults(signals);
    updateStats(signals);
    statusEl.textContent="SCAN COMPLETE";
    button.disabled=false;
    button.textContent="SCAN AGAIN âž¤";
}

document.getElementById('coinsScanned').textContent=ALL_COINS.length;
</script>
</body>
</html>
